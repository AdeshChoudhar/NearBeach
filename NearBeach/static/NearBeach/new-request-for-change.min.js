"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[7133],{3543:(e,t,a)=>{a.r(t),a.d(t,{default:()=>U});var r=a(6252);const n={class:"card"},o={class:"card-body"},l=(0,r._)("h1",null,"New Request for Change",-1),s=(0,r._)("hr",null,null,-1),i=(0,r._)("hr",null,null,-1),d=(0,r._)("hr",null,null,-1),u=(0,r._)("hr",null,null,-1),c=(0,r._)("hr",null,null,-1),p=(0,r._)("hr",null,null,-1),f=(0,r._)("hr",null,null,-1),m={class:"row submit-row"},_={class:"col-md-12"};var h=a(1010),M=a(5578),g=a(2984),v=a(7156),y=a(2898),k=a(2320),w=a(3058);const b=a(9669),R={name:"NewRequestForChange",components:{RfcBackoutPlan:y.Z,RfcDescription:h.Z,RfcDetails:M.Z,RfcImplementationPlan:k.Z,RfcRisk:g.Z,RfcTestPlan:v.Z},props:{groupResults:Array,rootUrl:{type:String,default:"/"},staticUrl:{type:String,default:"/"},userGroupResults:{type:Array,default:()=>[]}},emits:["onComplete"],mixins:[w.Z],data:()=>({currentTab:0,rfcData:{groupModel:[],rfcBackoutPlan:"",rfcChangeLeadModel:{},rfcImpactModel:{},rfcImplementationEndModel:"",rfcImplementationPlanModel:"",rfcImplementationStartModel:"",rfcPriorityModel:{},rfcReleaseModel:"",rfcRiskModel:{},rfcRiskSummaryModel:"",rfcSummaryModel:"",rfcTestPlanModel:"",rfcTitleModel:"",rfcTypeModel:{},rfcVersionModel:""},validationData:{tab_0:!1,tab_1:!1,tab_2:!1,tab_3:!1,tab_4:!1,tab_5:!1}}),methods:{beforeChange:function(){return this.validationData[`tab_${this.currentTab}`]},onChange:function(e,t){this.currentTab=t,window.scrollTo(0,60)},onComplete:function(){const e=new FormData,t=this.rfcData;e.set("rfc_title",t.rfcTitleModel),e.set("rfc_summary",t.rfcSummaryModel),e.set("rfc_type",t.rfcTypeModel),e.set("rfc_implementation_start_date",new Date(t.rfcImplementationStartModel).toISOString()),e.set("rfc_implementation_end_date",new Date(t.rfcImplementationEndModel).toISOString()),e.set("rfc_implementation_release_date",new Date(t.rfcReleaseModel).toISOString()),e.set("rfc_version_number",t.rfcVersionModel),e.set("rfc_lead",t.rfcChangeLeadModel),e.set("rfc_priority",t.rfcPriorityModel),e.set("rfc_risk",t.rfcRiskModel),e.set("rfc_impact",t.rfcImpactModel),e.set("rfc_risk_and_impact_analysis",t.rfcRiskSummaryModel),e.set("rfc_implementation_plan",t.rfcImplementationPlanModel),e.set("rfc_backout_plan",t.rfcBackoutPlan),e.set("rfc_test_plan",t.rfcTestPlanModel),t.groupModel.forEach(((t,a)=>{e.append("group_list",t)})),b.post(`${this.rootUrl}new_request_for_change/save/`,e).then((e=>{window.location.href=e.data})).catch((e=>{this.showErrorModal(e,"request_for_change","")}))},updateValidation:function(e){this.validationData[e.tab]=e.value},updateValues:function(e){this.rfcData[e.modelName]=e.modelValue}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl})}},U=(0,a(3744).Z)(R,[["render",function(e,t,a,h,M,g){const v=(0,r.up)("rfc-description"),y=(0,r.up)("rfc-details"),k=(0,r.up)("rfc-risk"),w=(0,r.up)("rfc-implementation-plan"),b=(0,r.up)("rfc-backout-plan"),R=(0,r.up)("rfc-test-plan");return(0,r.wg)(),(0,r.iD)("div",n,[(0,r._)("div",o,[l,s,(0,r.kq)(" DESCRIPTION "),(0,r.Wm)(v,{onUpdate_values:t[0]||(t[0]=e=>g.updateValues(e)),onUpdate_validation:t[1]||(t[1]=e=>g.updateValidation(e)),"static-url":a.staticUrl},null,8,["static-url"]),i,(0,r.kq)(" Details "),(0,r.Wm)(y,{"group-results":a.groupResults,"user-group-results":a.userGroupResults,onUpdate_validation:t[2]||(t[2]=e=>g.updateValidation(e)),onUpdate_values:t[3]||(t[3]=e=>g.updateValues(e))},null,8,["group-results","user-group-results"]),d,(0,r.kq)(" Risk "),(0,r.Wm)(k,{onUpdate_values:t[4]||(t[4]=e=>g.updateValues(e)),onUpdate_validation:t[5]||(t[5]=e=>g.updateValidation(e))}),u,(0,r.kq)(" Implementation Plan "),(0,r.Wm)(w,{onUpdate_values:t[6]||(t[6]=e=>g.updateValues(e)),onUpdate_validation:t[7]||(t[7]=e=>g.updateValidation(e))}),c,(0,r.kq)(" Backout Plan "),(0,r.Wm)(b,{onUpdate_values:t[8]||(t[8]=e=>g.updateValues(e)),onUpdate_validation:t[9]||(t[9]=e=>g.updateValidation(e))}),p,(0,r.kq)(" Test Plan "),(0,r.Wm)(R,{onUpdate_values:t[10]||(t[10]=e=>g.updateValues(e)),onUpdate_validation:t[11]||(t[11]=e=>g.updateValidation(e))}),(0,r.kq)(" Submit Button "),f,(0,r._)("div",m,[(0,r._)("div",_,[(0,r._)("a",{href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[12]||(t[12]=(...e)=>g.onComplete&&g.onComplete(...e))},"Create new Request for Change")])])])])}]])},3058:(e,t,a)=>{a.d(t,{Z:()=>n});var r=a(5169);const n={methods:{showErrorModal:function(e,t,a){new r.u_(document.getElementById("loadingModal")).hide(),document.getElementById("errorModalContent").innerHTML=`<strong>HTML ISSUE:</strong> We could not save the new requirement<hr>${e}`,new r.u_(document.getElementById("errorModal")).show()},showValidationErrorModal:function(){document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",new r.u_(document.getElementById("errorModal")).show()}}}}}]);